<div class="fade-in">
    <div class="flex justify-between items-center mb-4">
        <h1>üë§ Usuarios</h1>
        <button class="btn btn-primary" (click)="reset()" *ngIf="form.id">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Nuevo Usuario
        </button>
    </div>

    <div class="card mb-4">
        <h3 style="margin-bottom: 1.5rem;">{{ form.id ? '‚úèÔ∏è Editar Usuario' : '‚ûï Crear Usuario' }}</h3>
        <form (ngSubmit)="save()" #f="ngForm">
            <input type="hidden" name="id" [(ngModel)]="form.id" />

            <div class="form-group">
                <label class="form-label">Nombre completo</label>
                <input
                    class="form-input"
                    name="nombre"
                    [(ngModel)]="form.nombre"
                    placeholder="Ingresa el nombre completo"
                    required
                />
            </div>

            <div class="form-group">
                <label class="form-label">Correo electr√≥nico</label>
                <input
                    class="form-input"
                    type="email"
                    name="email"
                    [(ngModel)]="form.email"
                    placeholder="correo@ejemplo.com"
                    required
                />
            </div>

            <div class="form-group">
                <label class="form-label">C√©dula (opcional)</label>
                <input
                    class="form-input"
                    name="cedula"
                    [(ngModel)]="form.cedula"
                    placeholder="N√∫mero de c√©dula"
                />
            </div>

            <div class="form-group" style="display: flex; align-items: center; gap: 0.5rem;">
                <input
                    type="checkbox"
                    name="consentimiento_privacidad"
                    [(ngModel)]="form.consentimiento_privacidad"
                    id="privacy"
                    style="width: auto;"
                />
                <label for="privacy" style="margin: 0; cursor: pointer;">
                    Acepta pol√≠tica de privacidad
                </label>
            </div>

            <div class="flex gap-2">
                <button type="submit" class="btn btn-primary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    {{ form.id ? 'Actualizar' : 'Crear' }}
                </button>
                <button type="button" class="btn btn-secondary" (click)="reset()" *ngIf="form.id">
                    Cancelar
                </button>
            </div>
        </form>
    </div>

    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Email</th>
                    <th>Privacidad</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let u of users">
                    <td><span class="badge badge-primary">#{{ u.id }}</span></td>
                    <td style="font-weight: 500;">{{ u.nombre || u.name }}</td>
                    <td>{{ u.email }}</td>
                    <td>
                        <span class="badge badge-success" *ngIf="u.consentimiento_privacidad">‚úì Aceptado</span>
                        <span class="badge badge-warning" *ngIf="!u.consentimiento_privacidad">‚ö† Pendiente</span>
                    </td>
                    <td>
                        <div class="flex gap-2">
                            <button class="btn btn-sm btn-secondary" (click)="edit(u)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                </svg>
                                Editar
                            </button>
                            <button class="btn btn-sm btn-danger" (click)="remove(u)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                                Eliminar
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
